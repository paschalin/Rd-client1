(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4706],{54287:function(){},95302:function(e,a,n){Promise.resolve().then(n.bind(n,88598))},37832:function(e,a,n){"use strict";var t=n(57437),i=n(87138);n(2265),a.Z=function(e){let{savePost:a,stage:n,setstage:s,seteditorState:l,editorState:r,editing:o=!1,redirect:c}=e;return(0,t.jsxs)("div",{className:"addPostNavigation",children:[(0,t.jsxs)("div",{className:"logo",children:[(0,t.jsx)(i.default,{href:"/",children:(0,t.jsx)("div",{className:"logoImg"})}),(0,t.jsxs)("span",{children:[o?"Edit":n," Post"]})]}),(0,t.jsxs)("div",{className:"menuBtns",children:["preview"==n?(0,t.jsx)("button",{className:"btn btnDanger",onClick:()=>{s("create")},children:"Cancel"}):(0,t.jsx)(i.default,{href:"/",children:(0,t.jsx)("button",{className:"btn btnDanger",children:"Cancel"})}),"preview"!==n&&(0,t.jsx)("button",{className:"btn",onClick:()=>{s("preview"),l(r)},children:"Next"})]})]})}},23141:function(e,a,n){"use strict";var t=n(57437);n(2265),n(69533),a.Z=function(){return(0,t.jsx)("div",{className:"loadingArea"})}},36471:function(e,a,n){"use strict";var t=n(57437),i=n(2265);n(24931);var s=n(41648),l=n(12623),r=n(87138);a.Z=function(e){let{closePopup:a,popupContent:n,user:o,previewArticleDetails:c,copyPreviewLink:d,updateProfile:u}=e,[m,p]=(0,i.useState)(null==o?void 0:o.name),[h,v]=(0,i.useState)(null==o?void 0:o.username),[j,g]=(0,i.useState)(null==o?void 0:o.url),[x,C]=(0,i.useState)(null==o?void 0:o.bio),[D,f]=(0,i.useState)(null==o?void 0:o.avatar),[N,w]=(0,i.useState)(null),[y,b]=(0,i.useState)(!1),S=(0,i.useRef)(null),P=()=>{u({name:m,bio:x,url:j,username:h,file:N})};return(0,t.jsxs)("div",{className:"popupContainer",style:{height:"followList"==n&&"100%"},children:[(0,t.jsx)("div",{className:"popupcloserdiv",onClick:()=>a()}),(0,t.jsxs)("div",{className:"popupContent",children:["editProfile"===n&&(0,t.jsxs)("div",{className:"editProfilePopup",children:[(0,t.jsxs)("div",{className:"popupHeader",children:[(0,t.jsx)("h3",{children:"Profile Information"}),(0,t.jsx)("span",{onClick:()=>a(),children:(0,t.jsx)(s.Z,{})})]}),(0,t.jsxs)("div",{className:"updatePhoto",children:[(0,t.jsx)("div",{style:{background:"url(".concat(D,")")},className:"currentProfilePhoto"}),(0,t.jsxs)("div",{className:"photoActions",children:[(0,t.jsx)("span",{onClick:()=>S.current.click(),children:"Update"})," ",(0,t.jsx)("span",{children:"Remove"})]}),y&&(0,t.jsx)("span",{style:{cursor:"pointer"},onClick:()=>{f(null==o?void 0:o.avatar),b(!1),w(null)},children:"revert"}),(0,t.jsx)("input",{type:"file",name:"profilephoto",id:"profilephoto",ref:S,style:{display:"none"},accept:"image/jpeg, image/png",onChange:e=>{let a=e.target.files[0];f(URL.createObjectURL(a)),w(a),b(!0)}})]}),(0,t.jsxs)("div",{className:"updateField",children:[(0,t.jsx)("span",{children:"Name"}),(0,t.jsx)("input",{type:"text",placeholder:"Enter updated name",value:m,onChange:e=>p(e.target.value)}),(0,t.jsx)("small",{children:"Appears on your profile"})]}),(0,t.jsxs)("div",{className:"updateField",children:[(0,t.jsx)("span",{children:"username"}),(0,t.jsx)("input",{type:"text",placeholder:"Enter updated username",value:h,onChange:e=>v(e.target.value)}),(0,t.jsx)("small",{children:"Appears on your profile"})]}),(0,t.jsxs)("div",{className:"updateField",children:[(0,t.jsx)("span",{children:"Bio"}),(0,t.jsx)("textarea",{type:"text",placeholder:"Enter Bio",value:x,onChange:e=>C(e.target.value)}),(0,t.jsx)("small",{children:"Appears on your profile"})]}),(0,t.jsxs)("div",{className:"updateField",children:[(0,t.jsx)("span",{children:"Bio URL"}),(0,t.jsx)("input",{type:"text",placeholder:"Enter Bio URL (https://example.com)",value:j,onChange:e=>g(e.target.value)}),(0,t.jsx)("small",{children:"Appears on your profile"})]}),(0,t.jsxs)("div",{className:"updateProfileBtns",children:[(0,t.jsx)("button",{onClick:()=>a(),className:"cancel",children:"Cancel"}),(0,t.jsx)("button",{className:"save",onClick:()=>P(),children:"Save"})]})]}),"previewCodeUrl"===n&&(0,t.jsxs)("div",{className:"editProfilePopup previewCodeUrlPopup",children:[(0,t.jsx)("h1",{className:"previewCodeUrlTitle",children:"Your Preview Link Is Ready!"}),(0,t.jsx)("p",{children:"Share this link with friends/editors to look at your article."}),(0,t.jsx)("span",{className:"previewCodeText",children:"Preview Code"}),(0,t.jsx)("p",{className:"previewCode",children:c.code}),(0,t.jsx)("span",{className:"previewLink",children:c.url}),(0,t.jsx)("small",{children:"*You can still access these details in your Drafts page."}),(0,t.jsxs)("div",{className:"previewCodeUrlBtns",children:[(0,t.jsxs)("button",{onClick:()=>d(c.url),children:[" ",(0,t.jsx)(l.Z,{})," Copy Url"]}),(0,t.jsx)(r.default,{href:"/",children:(0,t.jsxs)("button",{className:"cancelBtn",onClick:()=>a(),children:[" ","Close"]})})]})]}),"followList"===n&&(0,t.jsxs)("div",{className:"followsContainer",children:[(0,t.jsxs)("div",{className:"followsHeader",children:[(0,t.jsx)("span",{children:"Followers"}),(0,t.jsx)("span",{children:"x"})]}),(0,t.jsxs)("div",{className:"followItem",children:[(0,t.jsx)("div",{className:"followAvatar"}),(0,t.jsxs)("div",{className:"followInfo",children:[(0,t.jsx)("span",{className:"followName",children:"Demo Name"}),(0,t.jsx)("span",{className:"followUsername",children:"@demoUsername"})]}),(0,t.jsx)("div",{className:"followActionBtn",children:"Action"})]})]})]})]})}},88598:function(e,a,n){"use strict";n.r(a);var t=n(57437);n(35995);var i=n(2265),s=n(30998),l=n(16463),r=n(28644),o=n(86261),c=n(31760),d=n.n(c),u=n(37832),m=n(19212),p=n.n(m),h=n(88497),v=n(99274),j=n(7630),g=n(57135),x=n.n(g),C=n(74362),D=n.n(C),f=n(20920),N=n(36471),w=n(24625),y=n(23141),b=n(57818),S=n(20357);let P=(0,b.default)(()=>Promise.all([n.e(1436),n.e(7335),n.e(2755),n.e(7774)]).then(n.bind(n,47774)),{loadableGenerated:{webpack:()=>[47774]},ssr:!1});a.default=function(){let e=(0,l.useRouter)(),a=(0,i.useRef)(null),{data:n}=(0,s.useSession)(),[c,m]=(0,i.useState)(h.EditorState.createEmpty()),[g,C]=(0,i.useState)([]),[b,k]=(0,i.useState)(),[E,F]=(0,i.useState)(""),[A,I]=(0,i.useState)(""),[_,L]=(0,i.useState)(""),[T,B]=(0,i.useState)(""),[U,M]=(0,i.useState)([]),[O,R]=(0,i.useState)([]),[Y,Z]=(0,i.useState)(null==n?void 0:n.id),[H,z]=(0,i.useState)({}),K=(0,i.useRef)(0),[W,X]=(0,i.useState)([]),[G,$]=(0,i.useState)(["create"]),[q,Q]=(0,i.useState)(!1),[V,J]=(0,i.useState)({code:"00000",url:"processing..."}),[ee,ea]=(0,i.useState)(!1),en=e=>e.toLowerCase().replace(/[^a-zA-Z0-9]+/g,"-").replace(/^-+|-+$/g,"");function et(e){return 0==K.current?e.toLowerCase().replace(/[^a-zA-Z0-9]+/g,"-").replace(/^-+|-+$/g,""):"".concat(null==n?void 0:n.username,"-draft-").concat(en(e))}function ei(e){return"https://reedboss.s3.us-east-2.amazonaws.com/images/".concat(e,".jpg")}let es=async(e,a,n)=>{let t=S.env.NEXT_PUBLIC_AWS_BUCKET_NAME,i=S.env.NEXT_PUBLIC_AWS_BUCKET_REGION,s=S.env.NEXT_PUBLIC_AWS_ACCESS_KEY,l=S.env.NEXT_PUBLIC_AWS_SECRET_KEY,c=new r.g({region:i,credentials:{accessKeyId:s,secretAccessKey:l}}),d={Bucket:t,Key:"images/".concat(n,"_").concat(a,".jpg"),Body:e,contentType:"image/jpeg"},u=new o.U(d);return(await c.send(u)).$metadata},el=async function(){let a,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1?arguments[1]:void 0,s=new FormData,l=new Promise((e,a)=>{Object.values(H.entityMap).map(async(a,n)=>{if("IMAGE"==a.type){let t=(0,f.Z)(),i=g.filter(e=>e.localSrc==a.data.src)[0].file;a.data.src=ei("".concat(et(E),"_").concat(n,"_").concat(t)),a.data.alt="Error Loading Image - "+E,e("uploaded: "+await es(i,"".concat(n,"_").concat(t),et(E)))}}),e("No Images")}),r=new Promise(async(e,a)=>{if(""!==_){let a=(0,f.Z)();s.append("coverImage",ei("".concat(et(E),"_cover_").concat(a))),await es(_.file,"cover_".concat(a),et(E)),e("Cover Image Uploaded")}else s.append("coverImage",""),e("Cover Image Uploaded")});console.log("Processing Article Images"),await l,console.log("Procced!"),console.log("Processing Cover Image"),await r,console.log("Procced!"),console.log("All Files Processed");let o=U.map(e=>e.name);a=U.map(e=>v.i.filter(a=>a.name==e.name)[0]).map(e=>e.id),H.entityMap.length>0?Object.values(H.entityMap).map(e=>{s.append("mediaFiles[]",e.data.src)}):s.append("mediaFiles[]",""),s.append("title",E),s.append("content",d()(H)),s.append("tags",o.join(",")),s.append("tagsIDs",a),s.append("authorId",null==n?void 0:n.id),s.append("isHidden",K.current),s.append("slug",et(E)),s.append("summary",A),s.append("readTime",function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;return Math.ceil(e.trim().split(/\s+/).length/a)}(c.getCurrentContent().getPlainText())),s.append("createdAt",p()().format("YYYY-MM-DD HH:mm:ss")),s.append("publishDate",p()().format("YYYY-MM-DD HH:mm:ss")),s.append("username",null==n?void 0:n.username),s.append("authToken",null==n?void 0:n.token),t&&(s.append("setupPreviewLink",1),s.append("previewSlug",(0,f.Z)()));let u=await fetch("/api/posts/index.php",{method:"POST",headers:{authorization:"Bearer ".concat(null==n?void 0:n.token)},body:s}),j=await u.json();200==j.status&&(F(""),m(h.EditorState.createEmpty()),z({entityMap:{},blocks:[]}),M(""),C([]),L(""),I(""),K.current=0,$(0),X([]),ea(!1),t&&j.message.previewCode?(i&&e.push("/preview/".concat(j.message.previewUrl)),Q(!0),J({code:j.message.previewCode,url:j.message.previewUrl})):e.push("/".concat(null==n?void 0:n.username,"/articles")))},er=async()=>{if(K.current=0,!E||!c.getCurrentContent().hasText()||""==c.getCurrentContent().getPlainText()||" "==c.getCurrentContent().getPlainText()||U.length<=0||!_||!A){alert("Please fill all fields. Title, summary, cover Image and tags are all required to publish an article");return}ea(!0),el()},eo=async()=>{if(K.current=1,!E||!H){alert("Please fill in a title and content before saving");return}ea(!0),el()};function ec(e){e.style.height="1px",e.style.height=25+e.scrollHeight+"px"}let ed=e=>{B(e.target.value),e.target.value.length>=2?R(v.i.filter(a=>a.name.toLowerCase().includes(e.target.value.toLowerCase()))):R([])},eu=e=>{if(U.includes(e)){alert("You have selectef this tag already");return}M([...U,e]),B(""),R([])},em=e=>{M(U.filter(a=>a.id!==e.id))};function ep(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(K.current=1,!E||!H){alert("Please fill in a title and content before saving");return}ea(!0),el(!0,e)}return ee?(0,t.jsx)(y.Z,{}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.Z,{savePost:eo,stage:G,setstage:$,seteditorState:m,editorState:c}),(0,t.jsxs)("div",{className:"newPostContainer ".concat(x().className),children:[q&&(0,t.jsx)(N.Z,{popupContent:"previewCodeUrl",closePopup:()=>(0,l.redirect)("/".concat(null==n?void 0:n.username,"/articles")),previewArticleDetails:V,copyPreviewLink:function(e){(0,w.vQ)("".concat(S.env.NEXT_PUBLIC_APP_URL,"/preview/").concat(e)),alert("Copied to clipboard")}}),"create"==G&&(0,t.jsxs)("div",{className:"editorContainer",children:[(0,t.jsx)("div",{className:"creatHeader",children:(0,t.jsx)("textarea",{type:"text",placeholder:"Title Here",name:"title",className:"articleTitle ".concat(D().className),cols:1,value:E,onChange:e=>F(e.target.value),onKeyUp:e=>ec(e.target)})}),(0,t.jsx)(P,{uploadImages:g,setuploadImages:C,content:b,setrawEntityContent:z,editorState:c,seteditorState:m})]}),"preview"==G&&(0,t.jsxs)("div",{className:"previewContainer",children:[(0,t.jsx)("h1",{children:"Article Preview"}),(0,t.jsxs)("div",{className:"previewWrapper",children:[(0,t.jsxs)("div",{className:"previewForms",children:[(0,t.jsxs)("div",{className:"selectCoverImage",children:[(0,t.jsx)("small",{className:"inputLabel",children:"Select cover image"}),(0,t.jsxs)("div",{className:"coverImageContainer",onClick:()=>{g.length<=0&&""==_&&a.current.click()},children:[""==_&&g.length>0&&(0,t.jsx)("button",{onClick:()=>a.current.click(),className:"coverImage",children:"Click to select custom Cover Image"}),""==_&&g.length>0&&g.map((e,a)=>(0,t.jsx)("div",{onClick:()=>L(e),className:"coverImage",style:{background:"url(".concat(e.localSrc,")")}},a)),""!==_&&(0,t.jsx)("div",{className:"selectedCoverImage",style:{background:"url(".concat(_.localSrc,")")},children:(0,t.jsx)("div",{className:"delete",onClick:()=>L(""),children:"X"})}),""==_&&g.length<=0&&(0,t.jsx)("span",{children:"Click to add a Cover Image"}),(0,t.jsx)("input",{type:"file",accept:"image/jpeg, image/png",onChange:e=>{let a=e.target.files[0],n=URL.createObjectURL(a);L({file:a,localSrc:n})},style:{display:"none"},ref:a})]})]}),(0,t.jsxs)("div",{className:"previewFormElement",children:[(0,t.jsx)("small",{className:"inputLabel",children:"Title"}),(0,t.jsx)("input",{type:"text",name:"title",value:E,onChange:e=>F(e.target.value)}),(0,t.jsx)("small",{className:"inputMessage"})]}),(0,t.jsxs)("div",{className:"previewFormElement",children:[(0,t.jsx)("small",{className:"inputLabel",children:"Preview Subtitle"}),(0,t.jsx)("textarea",{type:"text",name:"title",value:A,placeholder:"Enter article preview",onChange:e=>I(e.target.value),maxLength:400,onKeyUp:e=>ec(e.target)}),(0,t.jsxs)("small",{className:"inputMessage",children:["Please enter preview subtitle, this will be visible alongside the article title and cover image"," "]})]}),(0,t.jsxs)("div",{className:"previewFormElement",children:[(0,t.jsx)("small",{className:"inputLabel",children:"Tags"}),(0,t.jsx)("small",{className:"inputMessage",children:"Select categories that best describe your article"}),(0,t.jsx)("div",{className:"allSelectedTags",children:U.length>0&&U.map((e,a)=>(0,t.jsxs)("span",{children:[e.name," ",(0,t.jsx)("label",{onClick:()=>em(e),children:(0,t.jsx)(j.Z,{className:"closeIcon"})})]},a))}),(0,t.jsx)("input",{type:"text",name:"tags",className:"tagsearchInput",value:T,onChange:e=>ed(e),placeholder:"Enter category"}),O.length>0&&(0,t.jsx)("div",{className:"tagsRecommendations",children:O.map((e,a)=>(0,t.jsx)("span",{onClick:()=>eu(e),children:e.name},a))})]}),(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),(0,t.jsx)("br",{})]}),(0,t.jsxs)("div",{className:"previewOptions",children:[(0,t.jsx)("h1",{children:"Options"}),(0,t.jsxs)("div",{className:"previewOptionBtns",children:[(0,t.jsx)("button",{onClick:()=>eo(),className:"previewOptionBtn_save",children:"Save as drafft"}),(0,t.jsx)("button",{onClick:()=>er(),className:"previewOptionBtn_publish",children:"Publish"})]}),(0,t.jsxs)("div",{className:"previewOptionLinks",children:[(0,t.jsxs)("div",{className:"optionLink",children:[(0,t.jsx)("span",{onClick:()=>ep(!0),children:"View live preview"}),(0,t.jsx)("small",{children:"Click to generate a live preview of your article"})]}),(0,t.jsxs)("div",{className:"optionLink",children:[(0,t.jsx)("span",{onClick:()=>ep(),children:"Share preview link"}),(0,t.jsx)("small",{children:"Share preview link with someone for review, code will be required to view preview"})]})]})]})]})]})]})]})}},99274:function(e,a,n){"use strict";n.d(a,{i:function(){return t}});let t=[{id:1,name:"Tech",emoji:"\uD83D\uDCBB"},{id:2,name:"Science",emoji:"\uD83D\uDD2C"},{id:3,name:"Health",emoji:"\uD83C\uDFE5"},{id:4,name:"Travel",emoji:"✈️"},{id:5,name:"Food",emoji:"\uD83C\uDF54"},{id:6,name:"Fashion",emoji:"\uD83D\uDC57"},{id:7,name:"Fitness",emoji:"\uD83D\uDCAA"},{id:8,name:"Decor",emoji:"\uD83C\uDFE0"},{id:9,name:"Finance",emoji:"\uD83D\uDCB0"},{id:10,name:"Parenting",emoji:"\uD83D\uDC6A"},{id:11,name:"Self-Improve",emoji:"\uD83D\uDCDA"},{id:12,name:"Art",emoji:"\uD83C\uDFA8"},{id:13,name:"Books",emoji:"\uD83D\uDCD6"},{id:14,name:"Entertainment",emoji:"\uD83C\uDFA5"},{id:15,name:"Sports",emoji:"⚽"},{id:16,name:"Environment",emoji:"\uD83C\uDF3F"},{id:17,name:"Business",emoji:"\uD83D\uDCCA"},{id:18,name:"Photography",emoji:"\uD83D\uDCF7"},{id:19,name:"Music",emoji:"\uD83C\uDFB5"},{id:20,name:"Lifestyle",emoji:"\uD83C\uDF1F"},{id:21,name:"Gaming",emoji:"\uD83C\uDFAE"},{id:22,name:"Beauty",emoji:"\uD83D\uDC84"},{id:23,name:"Education",emoji:"\uD83C\uDF93"},{id:24,name:"Motivation",emoji:"\uD83D\uDD25"},{id:25,name:"Comedy",emoji:"\uD83D\uDE04"},{id:26,name:"Politics",emoji:"\uD83D\uDDF3️"},{id:27,name:"History",emoji:"\uD83D\uDCDC"},{id:28,name:"Crafts",emoji:"✂️"},{id:29,name:"Gardening",emoji:"\uD83C\uDF31"},{id:30,name:"Pets",emoji:"\uD83D\uDC3E"},{id:31,name:"Relationships",emoji:"\uD83D\uDC91"},{id:32,name:"Technology",emoji:"\uD83D\uDCF1"},{id:33,name:"Design",emoji:"\uD83C\uDFA8"},{id:34,name:"Movies",emoji:"\uD83C\uDFAC"},{id:35,name:"Cooking",emoji:"\uD83C\uDF73"},{id:36,name:"Nature",emoji:"\uD83C\uDF33"},{id:37,name:"Writing",emoji:"✍️"},{id:38,name:"Career",emoji:"\uD83D\uDC54"},{id:39,name:"Fitness",emoji:"\uD83D\uDCAA"},{id:40,name:"Inspiration",emoji:"\uD83C\uDF1F"},{id:41,name:"Spirituality",emoji:"\uD83D\uDE4F"},{id:42,name:"Hobbies",emoji:"\uD83C\uDFAF"},{id:43,name:"Artificial Intelligence",emoji:"\uD83E\uDD16"},{id:44,name:"Travel Tips",emoji:"\uD83C\uDF0D"},{id:45,name:"Parenting Tips",emoji:"\uD83D\uDC76"},{id:46,name:"DIY Projects",emoji:"\uD83D\uDD28"},{id:47,name:"Entrepreneurship",emoji:"\uD83D\uDCBC"},{id:48,name:"Photography Tips",emoji:"\uD83D\uDCF8"}]},24625:function(e,a,n){"use strict";n.d(a,{WK:function(){return l},p6:function(){return s},vQ:function(){return r}});var t=n(19212),i=n.n(t);function s(e){let a=i()(),n=i().tz(e,function(){let e=new Date().getTimezoneOffset(),a=i().tz.guess();if(e===i().tz(a).utcOffset())return a;{let n=i().tz.names();for(let a=0;a<n.length;a++)if(i().tz(n[a]).utcOffset()===e)return n[a];return a}}()),t=a.diff(n,"seconds"),s=a.diff(n,"minutes"),l=a.diff(n,"hours"),r=a.diff(n,"days"),o=a.diff(n,"months"),c=a.diff(n,"years");return t<60?"".concat(t," seconds ago"):s<60?"".concat(s," minutes ago"):l<24?"".concat(l," hours ago"):r<30?"".concat(r," days ago"):o<12?"".concat(o," months ago"):"".concat(c," years ago")}function l(e,a){let n=e.split(" ");return n.length<=a?e:n.slice(0,a).join(" ")+"..."}n(39053),n(99274);let r=e=>{let a=document.createElement("textarea");a.value=e,a.style.position="fixed",document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a)}},35995:function(){},69533:function(){},24931:function(){}},function(e){e.O(0,[8876,5663,7743,3475,8220,6990,7326,411,8514,3840,998,6300,5632,6261,8497,3910,104,2971,7023,1744],function(){return e(e.s=95302)}),_N_E=e.O()}]);
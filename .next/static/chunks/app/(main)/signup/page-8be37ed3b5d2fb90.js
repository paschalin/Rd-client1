(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[294],{54287:function(){},82385:function(e,a,n){Promise.resolve().then(n.bind(n,32229))},23141:function(e,a,n){"use strict";var s=n(57437);n(2265),n(69533),a.Z=function(){return(0,s.jsx)("div",{className:"loadingArea"})}},32229:function(e,a,n){"use strict";n.r(a);var s=n(57437),i=n(87138),t=n(30998),o=n(2265),l=n(19212),r=n.n(l),c=n(16463),m=n(28644),u=n(86261);n(18389);var d=n(23141),p=n(20357);a.default=function(){let[e,a]=(0,o.useState)(!1),[n,l]=(0,o.useState)(["signup","signup"]),[D,j]=(0,o.useState)(""),[h,g]=(0,o.useState)(["","","","",""]),[v,f]=(0,o.useState)(""),[C,x]=(0,o.useState)(""),[N,b]=(0,o.useState)(""),[y,k]=(0,o.useState)(null),[E,S]=(0,o.useState)(""),[w,F]=(0,o.useState)([]),A=(0,o.useRef)([]),I=(0,o.useRef)(null),[T,_]=(0,o.useState)(0),[P,B]=(0,o.useState)(!1),[L,H]=(0,o.useState)(""),[U,Y]=(0,o.useState)(""),[z,O]=(0,o.useState)(""),[R,K]=(0,o.useState)("");(0,c.useRouter)();let W=(0,c.useSearchParams)();function M(e){return"https://reedboss.s3.us-east-2.amazonaws.com/avatars/".concat(e,".jpg")}(0,o.useEffect)(()=>("true"===W.get("continue")&&(l(["","personal-information"]),j(W.get("email")),f(W.get("name")),x(W.get("image"))),()=>{}),[W]);let G=async e=>{let a=p.env.NEXT_PUBLIC_AWS_BUCKET_NAME,n=p.env.NEXT_PUBLIC_AWS_BUCKET_REGION,s=p.env.NEXT_PUBLIC_AWS_ACCESS_KEY,i=p.env.NEXT_PUBLIC_AWS_SECRET_KEY,t=new m.g({region:n,credentials:{accessKeyId:s,secretAccessKey:i}}),o=new u.U({Bucket:a,Key:"avatars/".concat(D,"_avatar.jpg"),Body:e,contentType:"image/jpeg"});await t.send(o)},X=e=>{if(w.includes(e)){K("");let a=w.indexOf(e);w.splice(a,1),F([...w])}else w.length>=3?K("You can only select 3 interests. You can search for more interests later on in the application."):(K(""),F([...w,e]))},V=async()=>{if(""==D){H("Please enter your email");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(D)){H("Please enter a valid email");return}B(!0),H("");let e=await fetch("/api/users/checkIfUserExists.php?email=".concat(D)),n=await e.json();console.log(n),a(n.message),await q()&&(B(!1),Y(""),g(["","","","",""]),l(["signup","verification"]))};function Z(){return h.every(e=>1===e.length)}let J=async()=>{B(!0),""==C&&null!==y&&await G(y);let e="";e=""==C?null==y?M("default_avatar"):M("".concat(D,"_avatar")):C;let a=new FormData;a.append("email",D),a.append("name",v),a.append("avatar",e),a.append("bio",E),a.append("interests",w.join(",")),a.append("createdAt",r()().format("YYYY-MM-DD HH:mm:ss"));let n=await fetch("/api/users/index.php",{method:"POST",body:a}),s=await n.json();200==s.status?(0,t.signIn)("credentials",{email:D,token:s.token,callbackUrl:"/"}):console.log(s),B(!1)},$=async()=>{B(!0);let a=new FormData;a.append("email",D),a.append("token",h.join("")),a.append("withToken",e);let n=await fetch("/api/users/verifyToken.php",{method:"POST",body:a}),s=await n.json();200==s.status&&"Token verified"==s.message?(e?(console.log("login"),(0,t.signIn)("credentials",{email:D,token:s.token,callbackUrl:"/"})):l(["verfication","personal-information"]),B(!1)):(B(!1),Y(s.message+" Please try resending token"),g(["","","","",""]))},q=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=new FormData;a.append("email",D);let n=await fetch("/api/users/sendToken.php",{method:"POST",body:a}),s=await n.json();return 200==s.status?(e&&Y("Token resent"),!0):(H(s.message),!1)},Q=async()=>{if(""==v){O("Please enter your full name");return}l(["personal-information","select-interest"])},ee=(e,a)=>{if(a.length<=1){let n=[...h];n[e]=a,g(n),1===a.length&&e<4&&A.current[e+1].focus()}},ea=(e,a)=>{"Backspace"===a.key&&!h[e]&&e>0&&A.current[e-1].focus()};return P?(0,s.jsx)(d.Z,{}):(0,s.jsxs)("div",{className:"signup",children:["signup"==n[1]&&(0,s.jsxs)("div",{className:"signupContainer",children:[(0,s.jsx)("h1",{className:"signupHeading",children:"Signup for reedboss"}),(0,s.jsx)("p",{className:"signupSubHeading",children:"reedboss is a powerful and intuitive blogging platform that empowers writers"}),(0,s.jsxs)("div",{className:"signupForm",children:[(0,s.jsx)("label",{className:"signupEmailLabel",children:"Enter email address"}),(0,s.jsx)("input",{type:"email",name:"email",placeholder:"example@mail.com",className:"signupEmailInput",onChange:e=>j(e.target.value)}),L&&(0,s.jsx)("p",{className:"emailError",children:L}),(0,s.jsx)("button",{onClick:()=>V(),className:"btn",style:{width:"100%"},children:"Continue"}),(0,s.jsxs)("p",{className:"signInLink",children:["Have an account?"," ",(0,s.jsx)(i.default,{href:"/login",children:(0,s.jsx)("span",{children:"Log In"})})]}),(0,s.jsxs)("div",{className:"textBreaker",children:[(0,s.jsx)("div",{className:"dash"}),"or",(0,s.jsx)("div",{className:"dash"})]}),(0,s.jsx)("div",{className:"socialLoginButtons",children:(0,s.jsxs)("button",{onClick:()=>(0,t.signIn)("google",{callbackUrl:"http://localhost:3000/"}),className:"socialbutton",children:[(0,s.jsx)("span",{style:{backgroundImage:"url('https://reedboss.s3.us-east-2.amazonaws.com/branding/google_logo.png')"},className:"sociallogo"}),"Continue with Google"]})})]})]}),"verification"==n[1]&&(0,s.jsxs)("div",{className:"verification",children:[(0,s.jsx)("h1",{className:"verificationHeading",children:"Verify Your Email Address"}),(0,s.jsx)("hr",{}),(0,s.jsxs)("p",{className:"subheading",children:["We sent a verification code to ",(0,s.jsx)("span",{className:"bold",children:D})]}),(0,s.jsxs)("p",{className:"verificationInstructions",children:["Please check your inbox/spam and enter the verification code below to verify your email address. The code will expire in 15 mins. ",(0,s.jsx)("b",{children:"make sure to check your spam folder too."})]}),U&&(0,s.jsx)("p",{className:"tokenError",children:U}),(0,s.jsx)("div",{className:"verificationForm",children:h.map((e,a)=>(0,s.jsx)("input",{type:"text",value:e,maxLength:1,onChange:e=>ee(a,e.target.value),onKeyDown:e=>ea(a,e),ref:e=>A.current[a]=e,pattern:"\\d*"},a))}),(0,s.jsx)("button",{disabled:!Z(),className:"".concat(Z()?"":"btnDisabled"," btn"),onClick:()=>$(),children:"Verify"}),(0,s.jsxs)("div",{className:"verificationFooter",children:[(0,s.jsx)("p",{className:"resendCode",onClick:()=>q(!0),children:"Resend Code"}),(0,s.jsx)("p",{className:"changeEmail",onClick:()=>l(["signup","signup"]),children:"Change email"})]})]}),"personal-information"==n[1]&&(0,s.jsxs)("div",{className:"personalInformation ".concat("personal-information"==n[1]?"active":""),children:[(0,s.jsx)("div",{className:"profileHead",children:(0,s.jsxs)("div",{className:"profileheadinfos",children:[(0,s.jsx)("h1",{className:"personalInformationHeading",children:"Personal Information"}),(0,s.jsx)("p",{className:"personalInformationSubHeading",children:"Help Us Customize Your Experience"})]})}),(0,s.jsxs)("div",{className:"personalInformationForm",children:[(0,s.jsx)("label",{children:"Select an Avatar"}),(0,s.jsxs)("div",{className:"avatars",children:[(0,s.jsx)("div",{onClick:()=>I.current.click(),className:"avatar ".concat(""==N&&"customAvatar"," ").concat(""!==N&&"selectedAvatar"),style:{background:"url(".concat(""!=N?N:"https://reedboss.s3.us-east-2.amazonaws.com/avatars/avDefault.jpg",")")}}),["https://reedboss.s3.us-east-2.amazonaws.com/avatars/av1.jpg","https://reedboss.s3.us-east-2.amazonaws.com/avatars/av2.jpg","https://reedboss.s3.us-east-2.amazonaws.com/avatars/av3.jpg","https://reedboss.s3.us-east-2.amazonaws.com/avatars/av4.jpg","https://reedboss.s3.us-east-2.amazonaws.com/avatars/av5.jpg"].map((e,a)=>(0,s.jsx)("div",{onClick:()=>{x(e),b("")},className:"avatar ".concat(C==e?"selectedAvatar":" "),style:{background:"url(".concat(e,")")}},a))]}),(0,s.jsx)("input",{type:"file",ref:I,style:{display:"none"},accept:"image/jpeg, image/png",onChange:e=>{let a=e.target.files[0],n=URL.createObjectURL(a);k(a),b(n),x("")}}),(0,s.jsx)("label",{className:"nameLabel",children:"Full Name"}),(0,s.jsx)("input",{className:"personalInformationInput",type:"text",name:"firstName",placeholder:"John Doe",onChange:e=>f(e.target.value),value:v}),z&&(0,s.jsx)("p",{className:"fullNameError",children:z}),(0,s.jsx)("label",{className:"emailLabel",children:"Email"}),(0,s.jsx)("input",{className:"personalInformationInput",type:"email",name:"email",readOnly:!0,value:D}),(0,s.jsx)("label",{className:"bioLabel",children:"Bio"}),(0,s.jsx)("textarea",{placeholder:"Tell us a bit about yourself...",onChange:e=>{S(e.target.value),_(e.target.value.length)},maxLength:200}),(0,s.jsxs)("small",{className:"bioWordCount",children:[T," / 200"]}),(0,s.jsx)("button",{onClick:()=>Q(),className:"btn",style:{width:"100%"},children:"Continue"})]})]}),"select-interest"==n[1]&&(0,s.jsxs)("div",{className:"selectInterest",children:[(0,s.jsx)("div",{className:"profileHead",children:(0,s.jsxs)("div",{className:"profileheadinfos",children:[(0,s.jsx)("h1",{children:"Select Your Interests"}),(0,s.jsx)("p",{children:"Discover Personalized Content Tailored to Your Preferences"})]})}),R&&(0,s.jsx)("p",{className:"selectedInterestsError",children:R}),(0,s.jsx)("div",{className:"interests",children:[{name:"Tech",emoji:"\uD83D\uDCF1"},{name:"Science",emoji:"\uD83D\uDD2C"},{name:"Health",emoji:"\uD83C\uDF3F"},{name:"Travel",emoji:"✈️"},{name:"Food",emoji:"\uD83C\uDF54"},{name:"Fashion",emoji:"\uD83D\uDC57"},{name:"Fitness",emoji:"\uD83D\uDCAA"},{name:"Decor",emoji:"\uD83C\uDFE0"},{name:"Finance",emoji:"\uD83D\uDCB0"},{name:"Parenting",emoji:"\uD83D\uDC6A"},{name:"Self-Improve",emoji:"\uD83D\uDCDA"},{name:"Art",emoji:"\uD83C\uDFA8"},{name:"Books",emoji:"\uD83D\uDCD6"},{name:"Entertainment",emoji:"\uD83C\uDFAC"},{name:"Sports",emoji:"⚽"},{name:"Environment",emoji:"\uD83C\uDF0D"},{name:"Business",emoji:"\uD83D\uDCBC"},{name:"Photography",emoji:"\uD83D\uDCF7"},{name:"Music",emoji:"\uD83C\uDFB5"},{name:"Lifestyle",emoji:"\uD83C\uDF06"},{name:"Gaming",emoji:"\uD83C\uDFAE"},{name:"Beauty",emoji:"\uD83D\uDC84"},{name:"Education",emoji:"\uD83C\uDF93"},{name:"Motivation",emoji:"\uD83D\uDCA1"},{name:"Comedy",emoji:"\uD83D\uDE02"},{name:"Politics",emoji:"\uD83D\uDDF3️"},{name:"History",emoji:"\uD83D\uDCDC"},{name:"Crafts",emoji:"\uD83C\uDFA8"},{name:"Gardening",emoji:"\uD83C\uDF31"},{name:"Pets",emoji:"\uD83D\uDC3E"},{name:"Relationships",emoji:"\uD83D\uDC91"},{name:"Technology",emoji:"\uD83D\uDCBB"},{name:"Design",emoji:"\uD83C\uDFA8"},{name:"Movies",emoji:"\uD83C\uDFA5"},{name:"Cooking",emoji:"\uD83C\uDF73"},{name:"Nature",emoji:"\uD83C\uDF33"},{name:"Writing",emoji:"✍️"},{name:"Career",emoji:"\uD83D\uDCBC"},{name:"Fitness",emoji:"\uD83D\uDCAA"},{name:"Inspiration",emoji:"\uD83D\uDCA1"},{name:"Spirituality",emoji:"\uD83E\uDDD8"},{name:"Hobbies",emoji:"\uD83C\uDFAF"},{name:"Artificial Intelligence",emoji:"\uD83E\uDD16"},{name:"Travel Tips",emoji:"✈️"},{name:"Parenting Tips",emoji:"\uD83D\uDC6A"},{name:"DIY Projects",emoji:"\uD83D\uDD28"},{name:"Entrepreneurship",emoji:"\uD83D\uDE80"},{name:"Photography Tips",emoji:"\uD83D\uDCF8"}].sort((e,a)=>e.name.localeCompare(a.name)).map((e,a)=>(0,s.jsxs)("div",{onClick:()=>X(e.name),className:"".concat(w.includes(e.name)?"selected":""," interest"),children:[e.emoji," ",e.name]},a))}),(0,s.jsx)("button",{disabled:w.length<3,className:"".concat(w.length<3?"btnDisabled":""," btn"),onClick:()=>J(),children:"Continue"})]})]})}},18389:function(){},69533:function(){}},function(e){e.O(0,[8560,7743,6990,411,8514,998,6300,5632,6261,2971,7023,1744],function(){return e(e.s=82385)}),_N_E=e.O()}]);